<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Product Log System</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(to right, #e0eafc, #cfdef3);
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    nav {
      width: 100%;
      background-color: #0056b3;
      color: white;
      padding: 15px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    nav .logo {
      font-size: 20px;
      font-weight: bold;
    }

    nav ul {
      list-style: none;
      display: flex;
      gap: 20px;
      margin: 0;
      padding: 0;
    }

    nav ul li {
      display: inline;
    }

    nav ul li a {
      color: white;
      text-decoration: none;
      font-weight: 500;
    }

    nav ul li a:hover {
      text-decoration: underline;
    }

    h1, h2 {
      text-align: center;
      margin-top: 20px;
    }

    form {
      background: #fff;
      padding: 25px 30px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      width: 95%;
      max-width: 900px;
      margin: 20px auto;
    }

    .form-group {
      margin-bottom: 15px;
    }

    label {
      display: block;
      font-weight: bold;
      margin-bottom: 6px;
    }

    input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    button {
      padding: 10px 20px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }

    button:hover {
      background-color: #0056b3;
    }

    .table-container {
      background: #fff;
      padding: 25px 30px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      width: 95%;
      max-width: 900px;
      margin: 20px auto;
      max-height: 400px;
      overflow-y: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      padding: 12px;
      border-bottom: 1px solid #eee;
      text-align: left;
    }

    th {
      background-color: #f4f4f4;
      position: sticky;
      top: 0;
      z-index: 1;
    }

    tr:hover {
      background-color: #f1f1f1;
    }

    .actions button {
      background-color: #dc3545;
    }

    .actions button:hover {
      background-color: #b52a3d;
    }

    .disabled-btn {
      background-color: #ccc;
      cursor: not-allowed;
    }
  </style>
</head>
<body>

  <nav>
    <div class="logo">ðŸ“¦ Product Log System</div>
    <ul>
      <li><a href="#">Home</a></li>
      <li><a href="#">Logs</a></li>
    </ul>
  </nav>

  <h2>Create Product</h2>
  <form id="productForm">
    <div class="form-group">
      <label for="name">Name</label>
      <input type="text" id="name" required />
    </div>
    <div class="form-group">
      <label for="description">Description</label>
      <input type="text" id="description" required />
    </div>
    <div class="form-group">
      <label for="price">Price (â‚¬)</label>
      <input type="number" id="price" step="0.01" required />
    </div>
    <div class="form-group">
      <label for="stock">Stock</label>
      <input type="number" id="stock" required />
    </div>
    <button type="submit">âž• Add Product</button>
  </form>

  <h2>Product List</h2>
  <div class="table-container">
    <table id="productTable">
      <thead>
        <tr>
          <th>ID</th><th>Name</th><th>Description</th><th>Price</th><th>Stock</th><th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script type="module">
    const API_URL = 'http://localhost:8081/api/products';

    const DUMMY_PRODUCTS = [
      { id: "1", name: "Wireless Mouse", description: "Compact wireless mouse", price: 19.99, stock: 50 },
      { id: "2", name: "Mechanical Keyboard", description: "Durable mechanical keyboard", price: 59.99, stock: 30 },
      { id: "3", name: "USB-C Hub", description: "6-in-1 usb-c hub", price: 29.95, stock: 75 },
      { id: "4", name: "Webcam", description: "High quality webcam", price: 49.99, stock: 40 },
      { id: "5", name: "Bluetooth Speaker", description: "Portable bluetooth speaker", price: 34.50, stock: 80 },
      { id: "6", name: "Laptop Stand", description: "Adjustable laptop stand", price: 27.99, stock: 60 },
      { id: "7", name: "HDMI Cable", description: "High speed hdmi cable", price: 9.99, stock: 100 },
      { id: "8", name: "External SSD", description: "Fast external ssd", price: 99.95, stock: 25 },
      { id: "9", name: "Gaming Chair", description: "Ergonomic gaming chair", price: 149.99, stock: 10 },
      { id: "10", name: "LED Monitor", description: "24-inch led monitor", price: 129.00, stock: 15 },
      { id: "11", name: "Noise-Canceling Headphones", description: "Premium noise-canceling headphones", price: 89.99, stock: 35 },
      { id: "12", name: "Smartwatch", description: "Feature-rich smartwatch", price: 74.49, stock: 45 },
      { id: "13", name: "Phone Holder", description: "Flexible phone holder", price: 12.99, stock: 65 },
      { id: "14", name: "Ergonomic Desk", description: "Height adjustable desk", price: 199.99, stock: 5 },
      { id: "15", name: "Laptop Sleeve", description: "Water-resistant laptop sleeve", price: 22.49, stock: 55 },
      { id: "16", name: "Power Bank", description: "Fast charging power bank", price: 39.90, stock: 70 },
      { id: "17", name: "Wireless Charger", description: "Qi wireless charger", price: 18.75, stock: 90 },
      { id: "18", name: "Smart Light", description: "App-controlled smart light", price: 15.60, stock: 120 },
      { id: "19", name: "Bluetooth Headset", description: "Long battery bluetooth headset", price: 45.00, stock: 33 },
      { id: "20", name: "Keyboard Cover", description: "Silicone keyboard cover", price: 7.99, stock: 110 }
    ];

    async function fetchProducts() {
      const tbody = document.querySelector("#productTable tbody");
      tbody.innerHTML = "";

      try {
        const res = await fetch(API_URL);
        const data = await res.json();
        const products = data.length ? data : DUMMY_PRODUCTS;

        products.forEach(p => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${p.id}</td>
            <td>${p.name}</td>
            <td>${p.description}</td>
            <td>â‚¬${p.price.toFixed(2)}</td>
            <td>${p.stock}</td>
            <td class="actions">
              <button class="delete-btn" data-id="${p.id}">Delete</button>
            </td>
          `;
          tbody.appendChild(row);
        });

        document.querySelectorAll(".delete-btn").forEach(button => {
          button.addEventListener("click", async (e) => {
            const id = e.target.getAttribute("data-id");
            await fetch(`${API_URL}/${id}`, { method: "DELETE" });
            fetchProducts();
          });
        });

      } catch (err) {
        console.warn("Could not fetch from API. Showing dummy data.");
        DUMMY_PRODUCTS.forEach(p => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${p.id}</td>
            <td>${p.name}</td>
            <td>${p.description}</td>
            <td>â‚¬${p.price.toFixed(2)}</td>
            <td>${p.stock}</td>
            <td class="actions"><button class="disabled-btn" disabled>Delete</button></td>
          `;
          tbody.appendChild(row);
        });
      }
    }

    document.getElementById("productForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const product = {
        name: document.getElementById("name").value,
        description: document.getElementById("description").value,
        price: parseFloat(document.getElementById("price").value),
        stock: parseInt(document.getElementById("stock").value)
      };
      try {
        await fetch(API_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(product)
        });
        e.target.reset();
        fetchProducts();
      } catch (err) {
        alert("Backend not available. Could not add product.");
      }
    });

    fetchProducts();
  </script>
</body>
</html>
